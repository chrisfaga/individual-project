if (self.CavalryLogger) { CavalryLogger.start_js(["nL1f1"]); }

__d("addDelightedTextInEditorState",["EditorState","TextDelightInComposerController","TextDelightSurface"],(function(a,b,c,d,e,f){"use strict";var g=b("TextDelightInComposerController").matcher;function a(a,c,d){d===void 0&&(d=!1);if(!g)return a;return d?g.matchLastWord(a,"",b("TextDelightSurface").COMMENT):g.applyTextDelightEntity(a,c,"",b("TextDelightSurface").COMMENT)}e.exports=a}),null);
__d("getUpgradedUFI2DelightsComposerPlugin",["DraftEntity","EditorState","React","TextDelightConfig","TextDelightInComposerGating","TextDelightSpan.react","TextDelightSurface","UnicodeUtils","addDelightedTextInEditorState","getEntityMatcher","installUFI2ComposerInputDecorators","keyCommandBackspaceDelight"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("TextDelightConfig").composerOptions,h=null;function i(a,b){a.inputProps.onComposerStateChange(function(c){var d=babelHelpers["extends"]({},c,b(c)),e=d.inputState;switch(e.__type){case"editor-state-based":c=c.inputState;if(c.__type!=="editor-state-based")return d;j(a,e.editorState,c.editorState);return k(d,c.editorState,!1);default:return d}})}function j(a,b,c){c.getCurrentContent()!==b.getCurrentContent()&&(h&&clearTimeout(h),g.autoHighlightThresholdMs>0&&(h=setTimeout(function(){a.inputProps.onComposerStateChange(function(a){return k(a,null,!0)})},g.autoHighlightThresholdMs)))}function k(a,c,d){var e=a.inputState;if(e.__type!=="editor-state-based")return a;c=b("addDelightedTextInEditorState")(e.editorState,c||e.editorState,d);return c===e.editorState?a:babelHelpers["extends"]({},a,{inputState:babelHelpers["extends"]({},e,{editorState:c})})}function l(a,c,d){__p&&__p();if(!b("TextDelightInComposerGating").isBackspaceEnabled(b("TextDelightSurface").COMMENT))return"not-handled";var e=a.composerState.inputState,f=null;if(e.__type!=="editor-state-based")return"not-handled";c==="backspace"&&(f=b("keyCommandBackspaceDelight")(d));if(!f)return"not-handled";a.onComposerStateChange(function(a){return babelHelpers["extends"]({},a,{inputState:babelHelpers["extends"]({},e,{editorState:f||e.editorState})})});return"handled"}function m(a,b,c){var d=l(a,b,c);return d==="not-handled"?a.handleKeyCommand?a.handleKeyCommand(b,c):"not-handled":d}function n(a){a.onComposerStateChange(function(a){var c=a.inputState;if(c.__type!=="editor-state-based")return a;var d=c.editorState;return babelHelpers["extends"]({},a,{inputState:babelHelpers["extends"]({},c,{editorState:b("EditorState").forceSelection(d,d.getSelection())})})})}function a(a){__p&&__p();return{installPlugin:function(a){__p&&__p();a.onInstallContentBlockToTextWithEntitiesInputMessageMappers(function(a,c,d){__p&&__p();var e=a.getEntityAt(c);if(e==null)return null;e=b("DraftEntity").get(e);if(e.getType()==="DELIGHT"){a=a.getText().slice(c,d);d=e.getData();e=d.campaignID;d=d.disabled;if(d)return null;if(/^\d+$/.test(e))return{message:{ranges:[{entity:{id:e},length:b("UnicodeUtils").strlen(a),offset:c}],text:a}}}return null})},render:function(c,d){c.subscriptionsHandler;var e=babelHelpers.objectWithoutProperties(c,["subscriptionsHandler"]),f={component:b("TextDelightSpan.react"),props:babelHelpers["extends"]({},a,{triggerChange:function(){return n(e.inputProps)}}),strategy:b("getEntityMatcher")(function(a){return a.getType()==="DELIGHT"})};return b("React").createElement(d,babelHelpers["extends"]({},e,{inputProps:babelHelpers["extends"]({},e.inputProps,{composerState:b("installUFI2ComposerInputDecorators")(e.inputProps.composerState,f),handleKeyCommand:function(a,b){return m(c.inputProps,a,b)},onComposerStateChange:function(a){return i(c,a)}})}))}}}e.exports=a}),null);